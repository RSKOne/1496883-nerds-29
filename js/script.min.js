const popupOpen=document.querySelector(".location__contact-button"),popupClose=document.querySelector(".popup__close"),popup=document.querySelector(".popup"),form=document.querySelector("form"),name=document.querySelector("[name=name]"),email=document.querySelector("[name=e-mail]"),text=document.querySelector("[name=textarea]");let isStorageSupport=!0,storage={name:"",email:""};try{storage.name=localStorage.getItem("name"),storage.email=localStorage.getItem("email")}catch(e){isStorageSupport=!1}popupOpen.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("popup__show"),storage?(name.value=storage.name,email.value=storage.email,text.focus()):name.focus()}),popupClose.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("popup__show")}),form.addEventListener("submit",function(e){name.value&&email.value?isStorageSupport&&(localStorage.setItem("name",name.value),localStorage.setItem("email",email.value)):(e.preventDefault(),popup.classList.add("popup__error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup.classList.contains("popup__show")&&(e.preventDefault(),popup.classList.remove("popup__show"))});